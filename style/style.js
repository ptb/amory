var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}import{createElement as e,PureComponent as t}from"react";import{createPortal as n}from"react-dom";var r=new Map,i=function(){return Array.from(r.entries()).reduce(function(e,t){var r=_slicedToArray(t,2),n=r[0],i=r[1];return Object.assign({},e,_defineProperty({},n,Array.from(i.values()).map(function(e){return e.rule}).join("")))},{})},a=function(e){return{pub:function(t){return e.map(function(e){return e(t)})},sub:function(t){var r=e.push(t)-1;return function(){return delete e[r]}}}}([]),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.has(e)||r.set(e,new Map),function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.id,u=n.rule;return r.get(e).has(t)||void 0===o||(r.get(e).set(t,{id:o,key:t,media:e,rule:u}),a.pub(i())),r.get(e).get(t)}},s=function(){var e=parseInt("ad",36),t=parseInt("zz",36),r=parseInt("aaa",36),n=parseInt("zzz",36),i=e;return function(e){if(e){var o=parseInt(e,36);return i=Math.max(i,o),o.toString(36)}if((i+=i<t||i>=r?1:r-t)>n)throw new RangeError;return i.toString(36)}}(),c=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase().replace(/^ms-/,"-ms-")},l=function(e){return Object.entries(e).reduce(function(e,t){var r=_slicedToArray(t,2),n=r[0],i=r[1];switch(!0){case/^(number|string)$/.test(void 0===i?"undefined":_typeof(i)):return e.concat(c(n)+":"+i);default:throw new TypeError}},[]).join(";")},u=function(e){return e.match(/(?:((?:element|isolate-override|plaintext))|((?:calc|cross-fade|filter|grab(?:bing)?|image-set|sticky|zoom-(?:in|out)))|((?:fill(?:-available)?|fit-content|isolate|(?:max|min)-content|stretch))|((?:pixelated)))/)},d=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},p=function(e){return Object.entries(e).reduce(function(e,t){var r=_slicedToArray(t,2),n=r[0],i=r[1];if("string"==typeof i)if(u(i)){var o=u(i).slice(1,5).filter(Boolean)[0];e[n]=[["Moz"],["Webkit"],["Webkit","Moz"],["Webkit","Moz","O"]][u(o).slice(1,5).findIndex(function(e){return e})].map(function(e){return i.replace(o,d(e)+"-"+d(o)).trim()}).concat(i)}else e[n]=i;return e},e)},m=function(e){return[function(e){var t=new Map([["alignItems","WebkitBoxAlign"],["flexGrow","WebkitBoxFlex"],["flexWrap","WebkitBoxLines"],["justifyContent","WebkitBoxPack"]]),r=new Map([["flex",["-webkit-box","-webkit-flex","flex"]],["flex-end","end"],["flex-start","start"],["inline-flex",["-webkit-inline-box","-webkit-inline-flex","inline-flex"]],["nowrap","single"],["space-around","justify"],["space-between","justify"],["wrap","multiple"],["wrap-reverse","multiple"]]);return Object.entries(e).reduce(function(e,n){var i=_slicedToArray(n,2),o=i[0],a=i[1];return"display"===o&&r.has(a)&&(e.display=r.get(a)),"flexDirection"===o&&"string"==typeof a&&(e.WebkitBoxDirection=a.match(/reverse/)?"reverse":"normal",e.WebkitBoxOrient=a.match(/column/)?"vertical":"horizontal"),t.has(o)&&(e[t.get(o)]=r.get(a)||a),e},e)},function(e){var t=["-webkit-",""],r=/((?:repeating-)?(?:linear|radial)-gradient)/gi;return Object.entries(e).reduce(function(e,n){var i=_slicedToArray(n,2),o=i[0],a=i[1];return"string"==typeof a&&a.match(r)&&(e[o]=t.map(function(e){return a.replace(r,function(t){return e+t})})),e},e)},function(e){return Object.entries(e).reduce(function(e,t){var r=_slicedToArray(t,2),n=r[0],i=r[1];return function(e){var t=function(e){return e.match(/(?:((?:boxSizing|textAlignLast))|((?:tabSize))|((?:imageRendering|overscrollBehavior|textSpacing))|((?:object(?:Fit|Position)))|((?:align(?:Content|Items|Self)|animation(?:Delay|Direction|Duration|FillMode|IterationCount|Name|PlayState|TimingFunction)?|back(?:dropFilter|faceVisibility|groundClip)|borderBlock(?:End|Start)|boxDecorationBreak|break(?:After|Before|Inside)|clipPath|colorAdjust|filter|flex(?:Basis|Direction|Flow|Grow|Shrink|Wrap)?|fontKerning|justifyContent|marginBlock(?:End|Start)|mask(?:Border(?:Outset|Repeat|Slice|Source|Width)?(?:Clip|Composite|Image|Origin|Position|Repeat|Size)?)?|order|paddingBlock(?:End|Start)|perspective(?:Origin)?|shape(?:ImageThreshold|Margin|Outside)|text(?:DecorationSkip|Emphasis(?:Color|Position|Style))|transform(?:Origin|Style)?|transition(?:Delay|Duration|Property|TimingFunction)?))|((?:appearance|border(?:Inline(?:End|Start))|column(?:s|Count|Fill|Gap|Rule(?:Color|Style|Width)?|Span|Width)|font(?:FeatureSettings|LanguageOverride|VariantLigatures)|marginInline(?:End|Start)|padding(?:Inline(?:End|Start))|textDecoration(?:Color|Line|Style)?))|((?:hyphens|textSizeAdjust|userSelect))|((?:flow(?:From|Into)|regionFragment|scrollSnap(?:Coordinate|Destination|Points(?:X|Y)|Type)|writingMode))|((?:borderImage)))/)}(e);return t?[["Moz"],["Moz","O"],["Ms"],["O"],["Webkit"],["Webkit","Moz"],["Webkit","Moz","Ms"],["Webkit","Ms"],["Webkit","O"]][t.slice(1,10).findIndex(function(e){return e})]:[]}(n).forEach(function(t){e[t+function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(n)]=i}),e},e)},function(e){return Object.entries(e).reduce(function(e,t){var r=_slicedToArray(t,2),n=r[0],i=r[1],o=n.replace(/[A-Z]/g,"-$&").toLowerCase();return e[o]=i,o!==n&&delete e[n],e},e)},p].reduce(function(e,t){return t(e)},e)},f=function(e,t){return Object.entries(m(_defineProperty({},e,t))).reduce(function(e,t){var r=_slicedToArray(t,2),n=r[0],i=r[1];switch(!0){case Array.isArray(i):i.forEach(function(t){var r=c(n)+":"+t;e.includes(r)||e.splice(-1,0,r)});break;case/^(number|string)$/.test(void 0===i?"undefined":_typeof(i)):var o=c(n)+":"+i;e.includes(o)||e.splice(-1,0,o)}return e},[c(e)+":"+t]).join(";")},g=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return Object.entries(t).reduce(function(t,u){var c=_slicedToArray(u,2),d=c[0],p=c[1];if("object"!=(void 0===p?"undefined":_typeof(p))){var y=f(d,p);return t.concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=""+i+n+e;if(o(t),!r.get(t).has(a)){var u=""+i+s(),c=/^[*a-z]/.test(n)?n+"{"+e+"}":"."+u+n+"{"+e+"}";o(t)(a,{id:u,rule:c})}return r.get(t).get(a)}(y,n,i,a).id)}switch(!0){case/(?:(\$[^:[ +>~{]+)?([\][*:_a-z]+)?)([ +>~])/.test(d):return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=Array.from(/(?:(\$[^:[ +>~]+)?([[\]*:=_a-z-]+)?)([ +>~])(?:(\$[^:[]+)?(.+)?)/.exec(e)),u=_slicedToArray(a,6),c=u[1],f=u[2],d=void 0===f?"":f,p=u[3],y=u[4],v=u[5],g=void 0===v?"":v,m=l(t),b=""+i+d+c,h=""+i+g+y;o(n);var w="",_="";void 0!==c&&(w=r.get(n).has(b)?r.get(n).get(b).id:o(n)(b,{id:""+i+s()}).id),void 0!==y&&(_=r.get(n).has(h)?r.get(n).get(h).id:o(n)(h,{id:""+i+s()}).id);var x=[].concat(i,d,p,i,g,m).join(""),k=a.slice(1,6),S=[void 0===c?"":"."+w,d,p,void 0===y?"":"."+_,g,"{",m,"}"].join("");o(n)(x,{id:k,rule:S})}(d,p,n,a),t;case/^\$/.test(d):return t.concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=""+i+n+e;if(o(t),!r.get(t).has(a)){var u=""+i+s();o(t)(a,{id:u})}return r.get(t).get(a)}(d,n,i,a).id);case/^@media/.test(d):return t.concat(e(p,d.substr(7),i,a));case/^[[*:a-z]/.test(d)&&"object"==(void 0===p?"undefined":_typeof(p)):return t.concat(e(p,n,""+i+d,a))}},[]).join(" ")},h=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("string"==typeof t)return t;if(Array.isArray(t))return t.map(function(t){return e(t)}).join();var i=l(t);if(o(),!r.get("").has(i)){var a=""+n+s(),u="@font-face{font-family:"+a+";"+i+"}";o()(i,{id:a,rule:u})}return r.get("").get(i).id},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=function(e){return Object.entries(e).reduce(function(e,t){var r=_slicedToArray(t,2),n=r[0],i=r[1];return e.concat(n+"{"+l(i)+"}")},[]).join("")}(e);if(o(),!r.get("").has(n)){var i=""+t+s(),a="@keyframes "+i+"{"+n+"}";o()(n,{id:i,rule:a})}return r.get("").get(n)},$=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.entries(t).reduce(function(t,n){var i=_slicedToArray(n,2),o=i[0],a=i[1];return"fontFamily"===o&&"string"!=typeof a?t.fontFamily=h(a,r):"animationName"===o&&"string"!=typeof a?t.animationName=b(a,r).id:"object"==(void 0===a?"undefined":_typeof(a))&&null!==a&&e(a,r),t},t)},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return g($(e,t),"","",t)},x=function(e){var t=[/@font-face\{font-family:([^;]+)()?()?()?()?;([^}]*?)\}/,/@keyframes ([^{]+)()?()?()?()?\{((?:[^{]+\{[^}]*\})*?)\}/,/(?:\.([^:{]+)(:[^ +>{~]+)?)([ +>~])?(?:\.([^:{]+)(:[^{]+)?)?{([^}]*)}/];return Array.from(e).map(function(e){var r=e.media,n=e.textContent;return t.reduce(function(e,t){for(;t.exec(n);){var i=Array.from(t.exec(n)),a=i[3]?[].concat(i[2],i[3],i[5],i[6]).join(""):[].concat(i[2],i[6]).join(""),u=i[3]?i.slice(1,6):s(i[1]),c=i[0];e.push(o(r)(a,{id:u,rule:c})),n=n.replace(t,"")}return e},[])})},Style=function(r){function o(e){var t;return _classCallCheck(this,o),(t=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e))).canUseDOM=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement),t.canUseDOM&&(t.nodes=document.head.querySelectorAll("style.rehydrate"),x(t.nodes),window.css=y),t.state={value:i()},t._hasUnmounted=!1,t.unsub=function(){return null},t}return _inherits(o,t),_createClass(o,[{key:"componentDidMount",value:function(){this.nodes.forEach(function(e){return e.remove()}),this.subscribe()}},{key:"componentWillUnmount",value:function(){this.unsub(),this._hasUnmounted=!0}},{key:"subscribe",value:function(){var e=this;this.unsub=a.sub(function(t){e._hasUnmounted||e.setState(function(e){return t===e.value?null:{value:t}})});var t=i();t!==this.state.value&&this.setState({value:t})}},{key:"render",value:function(){var t=this.props.render,r=this.state.value,i=Object.entries(r).map(function(t){var r=_slicedToArray(t,2),n=r[0],i=r[1];return e("style",{className:"rehydrate",dangerouslySetInnerHTML:{__html:""+i},media:n||null})});switch(!0){case this.canUseDOM:return n(i,document.head);case t:return i;default:return null}}}]),o}();export{y as css,i as getCss,Style};