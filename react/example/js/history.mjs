function e(n){return"/"===n.charAt(0)}function o(n,t){for(var e=t,o=e+1,i=n.length;o<i;e+=1,o+=1)n[e]=n[o];n.pop()}var n=function(){},t=function(n,t,e,o,i,r,a,c){if(!n){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[e,o,i,r,a,c],h=0;(s=new Error(t.replace(/%s/g,function(){return u[h++]}))).name="Invariant Violation"}throw s.framesToPop=1,s}},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r=function(n){return"/"===n.charAt(0)?n:"/"+n},a=function(n){return"/"===n.charAt(0)?n.substr(1):n},c=function(n,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(n)},s=function(n,t){return c(n,t)?n.substr(t.length):n},u=function(n){return"/"===n.charAt(n.length-1)?n.slice(0,-1):n},f=function(n){var t=n||"/",e="",o="",i=t.indexOf("#");-1!==i&&(o=t.substr(i),t=t.substr(0,i));var r=t.indexOf("?");return-1!==r&&(e=t.substr(r),t=t.substr(0,r)),{pathname:t,search:"?"===e?"":e,hash:"#"===o?"":o}},h=function(n){var t=n.pathname,e=n.search,o=n.hash,i=t||"/";return e&&"?"!==e&&(i+="?"===e.charAt(0)?e:"?"+e),o&&"#"!==o&&(i+="#"===o.charAt(0)?o:"#"+o),i},l=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},d=function(n,t,i,r){var a=void 0;"string"==typeof n?(a=f(n)).state=t:(void 0===(a=l({},n)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(n){throw n instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):n}return i&&(a.key=i),r?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=n&&n.split("/")||[],r=t&&t.split("/")||[],a=n&&e(n),c=t&&e(t),s=a||c;if(n&&e(n)?r=i:i.length&&(r.pop(),r=r.concat(i)),!r.length)return"/";var u=void 0;if(r.length){var h=r[r.length-1];u="."===h||".."===h||""===h}else u=!1;for(var f=0,d=r.length;d>=0;d--){var l=r[d];"."===l?o(r,d):".."===l?(o(r,d),f++):f&&(o(r,d),f--)}if(!s)for(;f--;f)r.unshift("..");!s||""===r[0]||r[0]&&e(r[0])||r.unshift("");var v=r.join("/");return u&&"/"!==v.substr(-1)&&(v+="/"),v}(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a},v=function(n,t){return n.pathname===t.pathname&&n.search===t.search&&n.hash===t.hash&&n.key===t.key&&function n(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(t,o){return n(t,e[o])});var o=void 0===t?"undefined":i(t);if(o!==(void 0===e?"undefined":i(e)))return!1;if("object"===o){var r=t.valueOf(),a=e.valueOf();if(r!==t||a!==e)return n(r,a);var c=Object.keys(t),s=Object.keys(e);return c.length===s.length&&c.every(function(o){return n(t[o],e[o])})}return!1}(n.state,t.state)},p=function(){var t=null,e=[];return{setPrompt:function(e){return n(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,o,i,r){if(null!=t){var a="function"==typeof t?t(e,o):t;"string"==typeof a?"function"==typeof i?i(a,r):(n(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==a)}else r(!0)},appendListener:function(n){var t=!0,o=function(){t&&n.apply(void 0,arguments)};return e.push(o),function(){t=!1,e=e.filter(function(n){return n!==o})}},notifyListeners:function(){for(var n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];e.forEach(function(n){return n.apply(void 0,t)})}}},g=!("undefined"==typeof window||!window.document||!window.document.createElement),y=function(n,t,e){return n.addEventListener?n.addEventListener(t,e,!1):n.attachEvent("on"+t,e)},m=function(n,t,e){return n.removeEventListener?n.removeEventListener(t,e,!1):n.detachEvent("on"+t,e)},w=function(n,t){return t(window.confirm(n))},b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},P=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},O=function(){try{return window.history.state||{}}catch(n){return{}}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(g,"Browser history needs a DOM");var o,i=window.history,a=(-1===(o=window.navigator.userAgent).indexOf("Android 2.")&&-1===o.indexOf("Android 4.0")||-1===o.indexOf("Mobile Safari")||-1!==o.indexOf("Chrome")||-1!==o.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,f=!(-1===window.navigator.userAgent.indexOf("Trident")),l=e.forceRefresh,v=void 0!==l&&l,x=e.getUserConfirmation,S=void 0===x?w:x,k=e.keyLength,A=void 0===k?6:k,E=e.basename?u(r(e.basename)):"",L=function(t){var e=t||{},o=e.key,i=e.state,r=window.location,a=r.pathname+r.search+r.hash;return n(!E||c(a,E),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+a+'" to begin with "'+E+'".'),E&&(a=s(a,E)),d(a,i,o)},T=function(){return Math.random().toString(36).substr(2,A)},j=p(),H=function(n){P($,n),$.length=i.length,j.notifyListeners($.location,$.action)},U=function(n){(function(n){return void 0===n.state&&-1===navigator.userAgent.indexOf("CriOS")})(n)||M(L(n.state))},R=function(){M(L(O()))},C=!1,M=function(n){C?(C=!1,H()):j.confirmTransitionTo(n,"POP",S,function(t){t?H({action:"POP",location:n}):I(n)})},I=function(n){var t=$.location,e=Y.indexOf(t.key);-1===e&&(e=0);var o=Y.indexOf(n.key);-1===o&&(o=0);var i=e-o;i&&(C=!0,D(i))},B=L(O()),Y=[B.key],F=function(n){return E+h(n)},D=function(n){i.go(n)},G=0,V=function(n){1===(G+=n)?(y(window,"popstate",U),f&&y(window,"hashchange",R)):0===G&&(m(window,"popstate",U),f&&m(window,"hashchange",R))},W=!1,$={length:i.length,action:"POP",location:B,createHref:F,push:function(t,e){n(!("object"===(void 0===t?"undefined":b(t))&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var o=d(t,e,T(),$.location);j.confirmTransitionTo(o,"PUSH",S,function(t){if(t){var e=F(o),r=o.key,c=o.state;if(a)if(i.pushState({key:r,state:c},null,e),v)window.location.href=e;else{var s=Y.indexOf($.location.key),u=Y.slice(0,-1===s?0:s+1);u.push(o.key),Y=u,H({action:"PUSH",location:o})}else n(void 0===c,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=e}})},replace:function(t,e){n(!("object"===(void 0===t?"undefined":b(t))&&void 0!==t.state&&void 0!==e),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var o=d(t,e,T(),$.location);j.confirmTransitionTo(o,"REPLACE",S,function(t){if(t){var e=F(o),r=o.key,c=o.state;if(a)if(i.replaceState({key:r,state:c},null,e),v)window.location.replace(e);else{var s=Y.indexOf($.location.key);-1!==s&&(Y[s]=o.key),H({action:"REPLACE",location:o})}else n(void 0===c,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(e)}})},go:D,goBack:function(){return D(-1)},goForward:function(){return D(1)},block:function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=j.setPrompt(n);return W||(V(1),W=!0),function(){return W&&(W=!1,V(-1)),t()}},listen:function(n){var t=j.appendListener(n);return V(1),function(){V(-1),t()}}};return $},k=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},A={hashbang:{encodePath:function(n){return"!"===n.charAt(0)?n:"!/"+a(n)},decodePath:function(n){return"!"===n.charAt(0)?n.substr(1):n}},noslash:{encodePath:a,decodePath:r},slash:{encodePath:r,decodePath:r}},S=function(){var n=window.location.href,t=n.indexOf("#");return-1===t?"":n.substring(t+1)},E=function(n){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+n)},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(g,"Hash history needs a DOM");var o=window.history,i=-1===window.navigator.userAgent.indexOf("Firefox"),a=e.getUserConfirmation,f=void 0===a?w:a,l=e.hashType,b=void 0===l?"slash":l,P=e.basename?u(r(e.basename)):"",O=A[b],x=O.encodePath,L=O.decodePath,T=function(){var t=L(S());return n(!P||c(t,P),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+P+'".'),P&&(t=s(t,P)),d(t)},j=p(),H=function(n){k(q,n),q.length=o.length,j.notifyListeners(q.location,q.action)},U=!1,R=null,C=function(){var n=S(),t=x(n);if(n!==t)E(t);else{var e=T(),o=q.location;if(!U&&v(o,e))return;if(R===h(e))return;R=null,M(e)}},M=function(n){U?(U=!1,H()):j.confirmTransitionTo(n,"POP",f,function(t){t?H({action:"POP",location:n}):I(n)})},I=function(n){var t=q.location,e=D.lastIndexOf(h(t));-1===e&&(e=0);var o=D.lastIndexOf(h(n));-1===o&&(o=0);var i=e-o;i&&(U=!0,G(i))},B=S(),Y=x(B);B!==Y&&E(Y);var F=T(),D=[h(F)],G=function(t){n(i,"Hash history go(n) causes a full page reload in this browser"),o.go(t)},V=0,W=function(n){1===(V+=n)?y(window,"hashchange",C):0===V&&m(window,"hashchange",C)},$=!1,q={length:o.length,action:"POP",location:F,createHref:function(n){return"#"+x(P+h(n))},push:function(t,e){n(void 0===e,"Hash history cannot push state; it is ignored");var o=d(t,void 0,void 0,q.location);j.confirmTransitionTo(o,"PUSH",f,function(t){if(t){var e=h(o),i=x(P+e);if(S()!==i){R=e,function(n){window.location.hash=n}(i);var r=D.lastIndexOf(h(q.location)),a=D.slice(0,-1===r?0:r+1);a.push(e),D=a,H({action:"PUSH",location:o})}else n(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),H()}})},replace:function(t,e){n(void 0===e,"Hash history cannot replace state; it is ignored");var o=d(t,void 0,void 0,q.location);j.confirmTransitionTo(o,"REPLACE",f,function(n){if(n){var t=h(o),e=x(P+t);S()!==e&&(R=t,E(e));var i=D.indexOf(h(q.location));-1!==i&&(D[i]=t),H({action:"REPLACE",location:o})}})},go:G,goBack:function(){return G(-1)},goForward:function(){return G(1)},block:function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=j.setPrompt(n);return $||(W(1),$=!0),function(){return $&&($=!1,W(-1)),t()}},listen:function(n){var t=j.appendListener(n);return W(1),function(){W(-1),t()}}};return q},L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},j=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},H=function(n,t,e){return Math.min(Math.max(n,t),e)},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.getUserConfirmation,o=t.initialEntries,i=void 0===o?["/"]:o,r=t.initialIndex,a=void 0===r?0:r,c=t.keyLength,s=void 0===c?6:c,u=p(),f=function(n){j(w,n),w.length=w.entries.length,u.notifyListeners(w.location,w.action)},l=function(){return Math.random().toString(36).substr(2,s)},v=H(a,0,i.length-1),y=i.map(function(n){return d(n,void 0,"string"==typeof n?l():n.key||l())}),g=h,m=function(n){var t=H(w.index+n,0,w.entries.length-1),o=w.entries[t];u.confirmTransitionTo(o,"POP",e,function(n){n?f({action:"POP",location:o,index:t}):f()})},w={length:y.length,action:"POP",location:y[v],index:v,entries:y,createHref:g,push:function(t,o){n(!("object"===(void 0===t?"undefined":L(t))&&void 0!==t.state&&void 0!==o),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=d(t,o,l(),w.location);u.confirmTransitionTo(i,"PUSH",e,function(n){if(n){var t=w.index+1,e=w.entries.slice(0);e.length>t?e.splice(t,e.length-t,i):e.push(i),f({action:"PUSH",location:i,index:t,entries:e})}})},replace:function(t,o){n(!("object"===(void 0===t?"undefined":L(t))&&void 0!==t.state&&void 0!==o),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=d(t,o,l(),w.location);u.confirmTransitionTo(i,"REPLACE",e,function(n){n&&(w.entries[w.index]=i,f({action:"REPLACE",location:i}))})},go:m,goBack:function(){return m(-1)},goForward:function(){return m(1)},canGo:function(n){var t=w.index+n;return t>=0&&t<w.entries.length},block:function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u.setPrompt(n)},listen:function(n){return u.appendListener(n)}};return w};export{x as createBrowserHistory,T as createHashHistory,U as createMemoryHistory,d as createLocation,v as locationsAreEqual,f as parsePath,h as createPath};
