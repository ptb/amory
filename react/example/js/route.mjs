function t(t,e){for(var r,s=[],a=0,i=0,c="",l=e&&e.delimiter||"/";null!=(r=D.exec(t));){var p=r[0],u=r[1],h=r.index;if(c+=t.slice(i,h),i=h+p.length,u)c+=u[1];else{var m=t[i],d=r[2],f=r[3],g=r[4],y=r[5],v=r[6],x=r[7];c&&(s.push(c),c="");var b=null!=d&&null!=m&&m!==d,C="+"===v||"*"===v,O="?"===v||"*"===v,j=r[2]||l,w=g||y;s.push({name:f||a++,prefix:d||"",delimiter:j,optional:O,repeat:C,partial:b,asterisk:!!x,pattern:w?o(w):x?".*":"[^"+n(j)+"]+?"})}}return i<t.length&&(c+=t.substr(i)),c&&s.push(c),s}function e(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function r(t){for(var r=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(r[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,o){for(var s="",a=n||{},i=(o||{}).pretty?e:encodeURIComponent,c=0;c<t.length;c++){var l=t[c];if("string"!=typeof l){var p,u=a[l.name];if(null==u){if(l.optional){l.partial&&(s+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if($(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<u.length;h++){if(p=i(u[h]),!r[c].test(p))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(p)+"`");s+=(0===h?l.prefix:l.delimiter)+p}}else{if(p=l.asterisk?encodeURI(u).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}):i(u),!r[c].test(p))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+p+'"');s+=l.prefix+p}}else s+=l}return s}}function n(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function o(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function s(t,e){return t.keys=e,t}function a(t){return t.sensitive?"":"i"}function i(t,e,r){$(e)||(r=e||r,e=[]);for(var o=(r=r||{}).strict,i=!1!==r.end,c="",l=0;l<t.length;l++){var p=t[l];if("string"==typeof p)c+=n(p);else{var u=n(p.prefix),h="(?:"+p.pattern+")";e.push(p),p.repeat&&(h+="(?:"+u+h+")*"),c+=h=p.optional?p.partial?u+"("+h+")?":"(?:"+u+"("+h+"))?":u+"("+h+")"}}var m=n(r.delimiter||"/"),d=c.slice(-m.length)===m;return o||(c=(d?c.slice(0,-m.length):c)+"(?:"+m+"(?=$))?"),c+=i?"$":o&&d?"":"(?="+m+"|$)",s(new RegExp("^"+c,a(r)),e)}import{createContext as c,Children as l,Component as p,h as u,PureComponent as h,cloneElement as m,isValidElement as d}from"./react.mjs";import{createBrowserHistory as f,createHashHistory as g,createLocation as y,createMemoryHistory as v,locationsAreEqual as x,createPath as b}from"./history.mjs";var C=c({});const O=t=>({isExact:"/"===t,params:{},path:"/",url:"/"});class j extends p{constructor(t){super(t);const{history:e}=t;this.state={match:O(e.location.pathname)}}getChildContext(){const{history:t,router:e}=this.props,{match:r}=this.state;return{router:Object.assign({},e,{history:t,route:{location:t.location,match:r}})}}componentDidMount(){const{history:t}=this.props;this.unlisten=t.listen(()=>{this.setState({match:O(t.location.pathname)})})}componentWillUnmount(){this.unlisten()}render(){const{children:t}=this.props;return u(C.Provider,{value:this.getChildContext()},t?l.only(t):null)}}var w=t=>u(j,{children:t.children,history:f(t)}),P=t=>u(j,{children:t.children,history:g(t)}),k=(t,e)=>{const r={};for(const n in t)e.indexOf(n)<0&&Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r};const E=t=>Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey);class R extends p{handleClick(t,e){const{onClick:r,replace:n,target:o,to:s}=this.props;r&&r(e),e.defaultPrevented||0!==e.button||o||E(e)||(e.preventDefault(),n?t.replace(s):t.push(s))}render(){const{to:t,innerRef:e}=this.props,r=k(this.props,["innerRef","to"]);return u(C.Consumer,{},({router:n})=>{const{history:o}=n,s="string"==typeof t?y(t,null,null,o.location):t,a=o.createHref(s);return u("a",Object.assign({},r,{href:a,onClick:t=>this.handleClick(o,t),ref:e}))})}}R.defaultProps={replace:!1};var S=t=>u(j,{children:t.children,history:v(t)}),$=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},N=function e(r,n,o){return $(n)||(o=n||o,n=[]),o=o||{},r instanceof RegExp?function(t,e){var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return s(t,e)}(r,n):$(r)?function(t,r,n){for(var o=[],i=0;i<t.length;i++)o.push(e(t[i],r,n).source);return s(new RegExp("(?:"+o.join("|")+")",a(n)),r)}(r,n,o):function(e,r,n){return i(t(e,n),r,n)}(r,n,o)},A=t,T=r,U=i,D=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");N.parse=A,N.compile=function(e,n){return r(t(e,n))},N.tokensToFunction=T,N.tokensToRegExp=U;const H={};let I=0;const M=(t,e)=>{const r=`${e.end}${e.strict}${e.sensitive}`,n=H[r]||(H[r]={});if(n[t])return n[t];const o=[],s={keys:o,re:N(t,o,e)};return I<1e4&&(n[t]=s,I++),s};var B=(t,e={},r)=>{const n="string"==typeof e?{path:e}:e,{path:o,exact:s=!1,sensitive:a=!1,strict:i=!1}=n;if(null===o)return r;const{re:c,keys:l}=M(o,{end:s,sensitive:a,strict:i}),p=c.exec(t);if(!p)return null;const[u,...h]=p,m=t===u;return s&&!m?null:{isExact:m,params:l.reduce((t,e,r)=>(t[e.name]=h[r],t),{}),path:o,url:"/"===o&&""===u?"/":u}};const K=t=>0===l.count(t),F=({computedMatch:t,exact:e,location:r,path:n,router:o,strict:s,sensitive:a})=>{if(t)return t;const{route:i}=o,c=(r||i.location).pathname;return B(c,{exact:e,path:n,sensitive:a,strict:s},i.match)};class L extends p{constructor(t){super(t),this.state={match:F(t)}}getChildContext(){const{location:t,router:e}=this.props,{match:r}=this.state;return{router:Object.assign({},e,{route:{location:t||e.route.location,match:r}})}}static getDerivedStateFromProps(t){return{match:F(t)}}renderChildren(){const{match:t}=this.state,{children:e,component:r,render:n,router:{history:o,route:s,staticContext:a}}=this.props,i={history:o,location:this.props.location||s.location,match:t,staticContext:a};return r?t?u(r,i):null:n?t?n(i):null:"function"==typeof e?e(i):e&&!K(e)?l.only(e):null}render(){return u(C.Provider,{value:this.getChildContext()},this.renderChildren())}}var W=t=>u(C.Consumer,{},({router:e})=>u(L,Object.assign({},t,{router:e})));const J=(t={})=>{const e=t.ariaCurrent,r=t.activeClassName,n=t.activeStyle,o=t.className,s=t.exact,a=t.getIsActive,i=t.location,c=t.strict,l=t.style,p=t.to,h=k(t,["ariaCurrent","activeClassName","activeStyle","className","exact","getIsActive","location","strict","style","to"]),m="object"==typeof p?p.pathname:p,d=m&&m.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1");return u(W,{children:({location:t,match:s})=>{const i=Boolean(a?a(s,t):s);return u(R,Object.assign({},{"aria-current":i&&e||null,className:i?[o,r].filter(t=>t).join(" "):o,style:i?Object.assign({},l,n):l,to:p},h))},exact:s,location:i,path:d,strict:c})};J.defaultProps={activeClassName:"active","aria-current":"page"};class q extends h{constructor(t){super(t),t.when&&this.enable(t.message)}componentDidUpdate(t){const{message:e,when:r}=this.props;r?t.when&&t.message===e||this.enable(e):this.disable()}componentWillUnmount(){this.disable()}disable(){this.unblock&&(this.unblock(),this.unblock=null)}enable(t){const{router:e}=this.props;this.unblock&&this.unblock(),this.unblock=e.history.block(t)}render(){return null}}q.defaultProps={when:!0};var z=t=>u(C.Consumer,{},({router:e})=>u(q,Object.assign({},t,{router:e})));const G={};let Q=0;const V=t=>{const e=t,r=G[e]||(G[e]={});if(r[t])return r[t];const n=N.compile(t);return Q<1e4&&(r[t]=n,Q++),n};var X=(t="/",e={})=>{if("/"===t)return t;return V(t)(e,{pretty:!0})};const Y=({computedMatch:t,to:e})=>t?"string"==typeof e?X(e,t.params):Object.assign({},e,{pathname:X(e.pathname,t.params)}):e;class Z extends h{constructor(t){super(t),this.isStatic()&&this.perform()}componentDidMount(){this.isStatic()||this.perform()}componentDidUpdate(t){const e=y(t.to),r=y(this.props.to);x(e,r)||this.perform()}isStatic(){const{router:t}=this.props;return t&&t.staticContext}perform(){const t=Y(this.props),{push:e,router:{history:r}}=this.props;e?r.push(t):r.replace(t)}render(){return null}}Z.defaultProps={push:!1};var _=t=>u(C.Consumer,{},({router:e})=>u(Z,Object.assign({},t,{router:e})));const tt=t=>"/"===t.charAt(0)?t:`/${t}`,et=(t,e)=>t?Object.assign({},e,{pathname:tt(t)+e.pathname}):e,rt=(t,e)=>{if(!t)return e;const r=tt(t);return 0!==e.pathname.indexOf(r)?e:Object.assign({},e,{pathname:e.pathname.substr(r.length)})},nt=t=>"string"==typeof t?t:b(t);class ot extends h{getChildContext(){const{context:t}=this.props;return{router:{staticContext:t}}}createHref(t){const{basename:e}=this.props;tt(e+nt(t))}handlePush(t){const{basename:e,context:r}=this.props;r.action="PUSH",r.location=et(e,y(t)),r.url=nt(r.location)}handleReplace(t){const{basename:e,context:r}=this.props;r.action="REPLACE",r.location=et(e,y(t)),r.url=nt(r.location)}handleListen(){}handleBlock(){}render(){const{basename:t,location:e}=this.props,r=k(this.props,["basename","location"]),n={action:"POP",block:this.handleBlock,createHref:this.createHref,listen:this.handleListen,location:rt(t,y(e)),push:this.handlePush,replace:this.handleReplace};return u(j,Object.assign({},r,{history:n,router:this.getChildContext().router}))}}ot.defaultProps={basename:"",location:"/"};class st extends p{render(){const{children:t}=this.props,{route:e}=this.props.router,r=this.props.location||e.location;let n,o;return l.forEach(t,t=>{if(null===o&&d(t)){const{exact:s,from:a,path:i,strict:c,sensitive:l}=t.props,p=i||a;n=t,o=B(r.pathname,{exact:s,path:p,sensitive:l,strict:c},e.match)}}),o?m(n,{computedMatch:o,location:r}):null}}var at=t=>u(C.Consumer,{},({router:e})=>u(st,Object.assign({},t,{router:e}))),it={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ct={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},lt=Object.defineProperty,pt=Object.getOwnPropertyNames,ut=Object.getOwnPropertySymbols,ht=Object.getOwnPropertyDescriptor,mt=Object.getPrototypeOf,dt=mt&&mt(Object),ft=t=>{const e=e=>{const{wrappedComponentRef:r}=e,n=k(e,["wrappedComponentRef"]);return u(W,{children:e=>u(t,Object.assign({},n,e,{ref:r}))})};return e.displayName=`withRouter(${t.displayName||t.name})`,e.WrappedComponent=t,function t(e,r,n){if("string"!=typeof r){if(dt){var o=mt(r);o&&o!==dt&&t(e,o,n)}var s=pt(r);ut&&(s=s.concat(ut(r)));for(var a=0;a<s.length;++a){var i=s[a];if(!(it[i]||ct[i]||n&&n[i])){var c=ht(r,i);try{lt(e,i,c)}catch(e){}}}return e}return e}(e,t)};export{w as BrowserRouter,P as HashRouter,R as Link,S as MemoryRouter,J as NavLink,z as Prompt,_ as Redirect,W as Route,j as Router,C as RouterContext,ot as StaticRouter,at as Switch,X as generatePath,B as matchPath,ft as withRouter};
